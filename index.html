<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SJCET Smart Canteen</title>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
background:#0f2027;
color:white;
overflow-x:hidden;
}

/* NAVBAR */
nav{
display:flex;
justify-content:space-between;
align-items:center;
padding:20px 60px;
position:fixed;
width:100%;
background:rgba(0,0,0,0.6);
backdrop-filter:blur(10px);
z-index:1000;
}

.logo{
font-size:24px;
font-weight:800;
color:#ff9800;
}

/* HERO */
.hero{
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
text-align:center;
padding:0 20px;
background:linear-gradient(rgba(15,32,39,0.85),rgba(15,32,39,0.85)),
url('https://images.unsplash.com/photo-1555992336-03a23c7b20ee') center/cover;
}

.hero h1{
font-size:50px;
margin-bottom:20px;
animation:fadeDown 1s ease;
}

.hero p{
color:#ddd;
margin-bottom:30px;
}

.hero button{
background:#ff9800;
padding:14px 30px;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:600;
}

.hero button:hover{
background:#ff5722;
}

/* MENU */
.menu-section{
padding:80px 60px;
background:#111;
}

.menu-title{
text-align:center;
font-size:36px;
margin-bottom:40px;
}

.menu{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:25px;
}

.card{
background:#1b1b1b;
padding:20px;
border-radius:15px;
text-align:center;
transition:0.4s;
opacity:0;
transform:translateY(40px);
animation:fadeUp 0.8s forwards;
}

.card:hover{
transform:translateY(-10px);
background:#222;
}

.price{
color:#ff9800;
font-weight:600;
margin:10px 0;
}

button{
padding:8px 18px;
border:none;
border-radius:20px;
background:#ff9800;
color:white;
cursor:pointer;
}

button:hover{
background:#ff5722;
}

/* CART BUTTON */
.cart-btn{
position:fixed;
bottom:30px;
right:30px;
background:#ff5722;
padding:15px 20px;
border-radius:30px;
cursor:pointer;
font-weight:bold;
box-shadow:0 5px 20px rgba(0,0,0,0.5);
}

/* MODAL */
.modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,0.7);
justify-content:center;
align-items:center;
}

.modal-content{
background:white;
color:black;
padding:25px;
border-radius:15px;
width:320px;
animation:slideUp 0.4s ease;
}

input{
width:100%;
padding:10px;
margin-bottom:10px;
border-radius:8px;
border:1px solid #ccc;
}

/* ANIMATIONS */
@keyframes fadeDown{
from{opacity:0;transform:translateY(-40px);}
to{opacity:1;transform:translateY(0);}
}

@keyframes fadeUp{
to{opacity:1;transform:translateY(0);}
}

@keyframes slideUp{
from{transform:translateY(50px);}
to{transform:translateY(0);}
}
</style>
</head>

<body>

<nav>
<div class="logo">üç¥ SJCET Canteen</div>
</nav>

<section class="hero">
<div>
<h1>Enjoy Delicious Meals</h1>
<p>Fast ordering system with instant token generation</p>
<button onclick="document.querySelector('.menu-section').scrollIntoView({behavior:'smooth'})">
Order Now
</button>
</div>
</section>

<section class="menu-section">
<h2 class="menu-title">Our Menu</h2>
<div class="menu" id="menu"></div>
</section>

<div class="cart-btn" onclick="openCheckout()">
üõí Cart (<span id="cartCount">0</span>)
</div>

<!-- Checkout Modal -->
<div class="modal" id="checkoutModal">
<div class="modal-content">
<h3>Checkout</h3>
<form id="checkoutForm">
<input type="text" id="studentName" placeholder="Student Name" required>
<input type="text" id="regNo" placeholder="Register Number" required>
<input type="email" id="studentEmail" placeholder="Email" required>
<button type="submit">Place Order</button>
<button type="button" onclick="closeCheckout()">Cancel</button>
</form>
</div>
</div>

<!-- Success Modal -->
<div class="modal" id="successModal">
<div class="modal-content">
<h3>Order Confirmed üéâ</h3>
<p>Your Token:</p>
<h2 id="tokenNumber"></h2>
<button onclick="closeSuccess()">Close</button>
</div>
</div>

<script>
(function(){
emailjs.init("f6PbzcCV12G8gypUQ");
})();

const SERVICE="service_9rub1jr";
const TEMPLATE="template_jco7mt";

let cart=[];
let total=0;

const foods=[
["Sandwich",30],["Burger",50],["Juice",25],["Pizza",80],
["French Fries",40],["Coffee",20],["Tea",15],["Noodles",60],
["Pasta",70],["Samosa",10],["Roll",35],["Milkshake",55]
];

const menu=document.getElementById("menu");
const cartCount=document.getElementById("cartCount");
const checkoutModal=document.getElementById("checkoutModal");
const successModal=document.getElementById("successModal");
const tokenNumber=document.getElementById("tokenNumber");
const checkoutForm=document.getElementById("checkoutForm");

foods.forEach((food,index)=>{
const card=document.createElement("div");
card.className="card";
card.style.animationDelay=index*0.1+"s";
card.innerHTML=`
<h3>${food[0]}</h3>
<div class="price">Rs. ${food[1]}</div>
<button onclick="addToCart('${food[0]}',${food[1]})">Add</button>
`;
menu.appendChild(card);
});

function addToCart(name,price){
cart.push({name,price});
total+=price;
cartCount.innerText=cart.length;
}

function openCheckout(){
if(cart.length===0){alert("Cart empty!");return;}
checkoutModal.style.display="flex";
}

function closeCheckout(){
checkoutModal.style.display="none";
}

function closeSuccess(){
successModal.style.display="none";
}

checkoutForm.addEventListener("submit",function(e){
e.preventDefault();

const name=document.getElementById("studentName").value.trim();
const reg=document.getElementById("regNo").value.trim();
const email=document.getElementById("studentEmail").value.trim();

const details=cart.map(item=>`${item.name} - Rs.${item.price}`).join("\n");

const token="SJCET-"+Math.floor(1000+Math.random()*9000);
tokenNumber.innerText=token;

emailjs.send(SERVICE,TEMPLATE,{
student_name:name,
register_number:reg,
student_email:email,
order_details:details,
total_amount:total,
token_number:token
})
.then(function(response){
console.log("SUCCESS:",response.status,response.text);
checkoutModal.style.display="none";
successModal.style.display="flex";
cart=[];
total=0;
cartCount.innerText=0;
checkoutForm.reset();
})
.catch(function(error){
console.log("FAILED STATUS:",error.status);
console.log("FAILED TEXT:",error.text);
alert("Email failed. Check console.");
});
});
</script>

</body>
</html>
